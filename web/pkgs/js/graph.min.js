

/* web/pkgs/js/graph.min.js */
var gr={auto:1,dBm:0,db_units:"dB",speed:1,marker:-1,threshold:0,averaging:!1,avg_dB:0,divider:!1,max:0,min:0,hi:0,lo:0,goalH:0,goalL:0,scroll:0,scaleWidth:60,hysteresis:15,padding_tb:0,xi:0,secs_last:0,redraw_scale:!1,clr_color:"mediumBlue",bg_color:"ghostWhite",grid_color:"lightGrey",scale_color:"white",last_last:0};function graph_init(r,g){gr.cv=r,gr.ct=r.ctx,gr.auto=1,gr.dBm=w3_opt(g,"dBm",0),gr.speed=w3_opt(g,"speed",1),gr.averaging=w3_opt(g,"averaging",!1),gr.plot_color=w3_opt(g,"color","black"),gr.dBm?(gr.padding_tb=20,gr.db_units="dBm"):(gr.db_units="dB",gr.padding_tb=0)}function graph_clear(){var r=gr.ct;r.fillStyle=gr.clr_color,r.fillRect(0,0,gr.cv.width-gr.scaleWidth,gr.cv.height),gr.xi=gr.cv.width-gr.scaleWidth,graph_rescale()}function graph_rescale(){gr.redraw_scale=!0}function graph_mode(r,g,l){gr.auto="auto"==r?1:0,gr.auto||(gr.max=g,gr.min=l),graph_rescale()}function graph_speed(r){r<1&&(r=1),gr.speed=r}function graph_marker(r){gr.marker=r}function graph_annotate(r){gr.divider=r}function graph_threshold(r){gr.threshold=r}function graph_averaging(r){gr.averaging=r,gr.avg_dB=0}function graph_plot(r,g){var l=w3_opt(g,"color",gr.plot_color),e=w3_opt(g,"line",!1),a=gr.cv,i=gr.ct,t=a.width-gr.scaleWidth,o=a.height,d=t-gr.xi,c=gr.hi-gr.lo,s=function(r){var g=(r-gr.lo)/c;return Math.round(o-g*o)},n=function(r){return 10*Math.ceil(r/10)},h=!1;if(gr.redraw_scale||gr.auto){if(gr.auto){var _=.25/gr.speed;gr.goalH=gr.goalH>r+gr.padding_tb?gr.goalH-_:r+gr.padding_tb,gr.goalL=gr.goalL<r-gr.padding_tb?gr.goalL+_:r-gr.padding_tb}else gr.goalH=gr.max,gr.goalL=gr.min,h=!0;if(gr.goalL>gr.lo+gr.hysteresis||gr.goalL<gr.lo||h){var f=function(r){return 10*Math.floor(r/10)}(gr.goalL)-5,p=gr.hi-f;if(f<=gr.lo){var v=c/p;d&&(i.drawImage(a,gr.xi,0,d,o,gr.xi,0,d,o*v),i.fillStyle=gr.bg_color,i.fillRect(gr.xi,Math.floor(v*o),d,o*(1-v)+1))}else{var u=p/c;d&&i.drawImage(a,gr.xi,0,d,o*u,gr.xi,0,d,o)}gr.lo=f,c=p,gr.auto&&(gr.redraw_scale=!0)}if(gr.goalH>gr.hi||gr.goalH<gr.hi-gr.hysteresis||h){var m=n(gr.goalH)+5;p=m-gr.lo;if(m>=gr.hi){v=c/p;d&&(i.drawImage(a,gr.xi,0,d,o,gr.xi,o*(1-v),d,o*v),i.fillStyle=gr.bg_color,i.fillRect(gr.xi,0,d,Math.ceil(o*(1-v))))}else{u=p/c;d&&i.drawImage(a,gr.xi,o*(1-u),d,o*u,gr.xi,0,d,o)}gr.hi=m,c=m-gr.lo,gr.auto&&(gr.redraw_scale=!0)}}if(gr.redraw_scale){i.fillStyle=gr.clr_color,i.fillRect(t,0,gr.scaleWidth,o),i.fillStyle=gr.scale_color,i.font="10px Verdana";for(var w=gr.lo;(w=n(w))<=gr.hi;w++)i.fillText(w+" "+gr.db_units,t+2,s(w)+4,gr.scaleWidth);gr.redraw_scale=!1}var x=!1;if(++gr.scroll>=gr.speed){gr.scroll=0,gr.xi>0&&gr.xi--,i.drawImage(a,1,0,t-1,o,0,0,t-1,o);var y=(new Date).getTime()/1e3,b=Math.floor(y/gr.marker),S=Math.floor(gr.secs_last/gr.marker);if(-1==gr.marker||b==S){i.fillStyle=gr.bg_color,i.fillRect(t-1,0,1,o),i.fillStyle=gr.grid_color;for(w=gr.lo;(w=n(w))<=gr.hi;w++)i.fillRect(t-1,s(w),1,1)}else gr.secs_last=y,i.fillStyle=gr.grid_color,i.fillRect(t-1,0,1,o);if(0!=gr.divider){var B=i.fillStyle;i.fillStyle=gr.divider,i.fillRect(t-1,0,1,o),gr.divider=!1,i.fillStyle=B}gr.threshold&&(i.fillStyle="red",i.fillRect(t-1,s(gr.threshold),1,1)),x=!0}if(gr.averaging){var R=(gr.avg_dB*(gr.speed-1)+r)/gr.speed;r=gr.avg_dB=R}var k=null;if(!gr.averaging||x||0!=e){var H=s(r);0!=e?(i.strokeStyle=l,i.beginPath(),i.moveTo(t-1,e),i.lineTo(t,H),k=H,i.stroke()):(i.fillStyle=l,i.fillRect(t-1,H,1,1))}return k}